<div class="col">
  <div class="card bg-light mb-3"" style=" min-width: 22rem;">

    <div class="card-header"> <b>
        <%= @article.title %>
      </b>
    </div>

    <div class="card-body">
      <% if !@article.image.nil? then %>
      <div class="card-img mb-2">
        <%= image_tag @article.image, class: 'rounded img-fluid' %>
      </div>
      <% end %>
      <p class="card-text">
        <%= @article.text %>
      </p>
      <p>

        <% user_id = current_user.nil? || current_user.id; if @article.user_id == user_id || User.find(user_id).role == 'admin' then %>
        <%= link_to  "Delete", article_path(@article),
                 method: :delete,
                 data: { confirm: 'Are you sure?'},
                class: "btn btn-danger" %>
        <%= link_to  "Edit", edit_article_path(@article), class: "btn btn-info" %>
        <% end %>
        <%= link_to  "View All", articles_path, class: "btn btn-secondary" %>

      </p>
    </div>
    <div class="card-footer text-muted">
      <% user = User.find(@article.user_id) %>
      <%= image_tag user.avatar, alt: 'avatar', class:'avatar'%>

      <b>
        @<%= user.username %>
      </b>
      <%= time_ago_in_words(@article.created_at) %>
    </div>
  </div>

  <% if !@article.comments.empty?  then %>
  <div class="card ml-4">
    <div class="card-header bg-info">Comments</div>
    <%= render @article.comments %>
    <% end %>
    <% if !current_user.nil?  then %>
    <%= render 'comments/form' %>
    <% end %>
  </div>
</div>